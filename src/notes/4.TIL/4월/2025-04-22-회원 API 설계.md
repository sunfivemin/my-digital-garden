---
tags:
  - TIL
created: 2025-04-22
---

# π“ 2025-04-22 TIL

## π“ μ¤λ λ°°μ΄ ν•µμ‹¬ μ”μ•½
- RESTful APIμ HTTP λ©”μ„λ“(GET, POST, PUT, DELETE) μ‹¤μ  ν™μ©λ²•κ³Ό μ°¨μ΄μ 
- Request/Response κµ¬μ΅°μ™€ νλΌλ―Έν„° μ²λ¦¬ λ°©λ²•(3μΆ… μ„ΈνΈ: params, query, body)
- μƒνƒ μ½”λ“(200/201/400/404/500)μ™€ μμ™Έμ²λ¦¬ μµκ΄€ λ“¤μ΄κΈ°
- Express .route() μ²΄μ΄λ‹ ν¨ν„΄
- ν•Έλ“¤λ¬(Handler)λ€? μ”μ²­ μ‹ μ‹¤ν–‰λλ” μ½λ°± ν•¨μλΌλ” κ°λ…


## π§  μƒμ„Έ ν•™μµ λ‚΄μ©

## π“ μ£Όμ  1:  νμ› & μ±„λ„ κ΄€λ¦¬ μ‹¤μ „ ν”„λ΅μ νΈ μ„¤κ³„

### π“  ν•Έλ“¤λ¬λ€?

- app.get("/κ²½λ΅", (req, res) => { ... }) ν•νƒλ΅, **ν΄λΌμ΄μ–ΈνΈκ°€ HTTP requestλ¥Ό λ‚ λ¦¬λ©΄ μλ™μΌλ΅ μ‹¤ν–‰λλ” μ½λ°± ν•¨μ
- λ…Έλ“/Expressμ—μ„λ” μ΄λ° ν•Έλ“¤λ¬λ΅ λ¨λ“  API λΌμ°ν…μ„ μ²λ¦¬ν•λ‹¤.

---
## π€ ν”„λ΅μ νΈ κµ¬μ΅° (μ‹¤μ „ νλ¦„)

**1. λ΅κ·ΈμΈ νμ΄μ§€**
- λ‹¨μ ν™”λ©΄λ§ κ·Έλ¦΄ λ•λ” API ν•„μ” μ—†μ
- λ΅κ·ΈμΈ λ²„νΌ ν΄λ¦­ μ‹ β†’ id, pwd μ „λ‹¬ β†’ **POST /login** API ν•„μ”

**2. νμ›κ°€μ… νμ΄μ§€**
- ν™”λ©΄ μμ²΄μ—λ” API ν•„μ” μ—†μ
- β€νμ›κ°€μ…β€™ λ²„νΌ ν΄λ¦­ μ‹ β†’ id, pwd, name μ „λ‹¬ β†’ **POST /join** API ν•„μ”

**3. λ§μ΄νμ΄μ§€**
- λ§μ΄νμ΄μ§€ ν™”λ©΄ μ§„μ… β†’ **GET /users/:id**λ΅ λ‚΄ μ •λ³΄ λ¶λ¬μ¤κΈ°
- β€νμ›νƒν‡΄β€™ ν΄λ¦­ β†’ **DELETE /users/:id**λ΅ λ‚΄ μ •λ³΄ μ‚­μ 

---
## π—‚οΈ νμ› & μ±„λ„ API μ„¤κ³„

### νμ› API

| **κΈ°λ¥** | **λ©”μ„λ“/μ—”λ“ν¬μΈνΈ**     | **μ”μ²­(req)**         | **μ‘λ‹µ(res)**       |
| ------ | ----------------- | ------------------- | ----------------- |
| λ΅κ·ΈμΈ    | POST /login       | body: id, pwd       | ${name}λ‹ ν™μν•©λ‹λ‹¤    |
| νμ›κ°€μ…   | POST /join        | body: id, pwd, name | ${name}λ‹ ν™μν•©λ‹λ‹¤    |
| νμ›μ΅°ν   | GET /users/:id    | params: id          | userId, name      |
| νμ›νƒν‡΄   | DELETE /users/:id | params: id          | ${name}λ‹ λ‹¤μμ— λ§λ‚μ”! |
- νμ›μ€ κ³„μ • λ‹Ή μ±„λ„ 100κ°κΉμ§€ μƒμ„± κ°€λ¥

### μ±„λ„ API
|**κΈ°λ¥**|**λ©”μ„λ“/μ—”λ“ν¬μΈνΈ**|**μ”μ²­(req)**|**μ‘λ‹µ(res)**|
|---|---|---|---|
|μ±„λ„ μƒμ„±|POST /channels|body: userId, channelName|${channelName} μ±„λ„μ΄ λ“±λ΅λμ—μµλ‹λ‹¤.|
|μ±„λ„ μμ •|PUT /channels/:id|params: id, body: μμ •λ‚΄μ©|${channelName} μ±„λ„μ΄ μμ •λμ—μµλ‹λ‹¤.|
|μ±„λ„ μ‚­μ |DELETE /channels/:id|params: id|${channelName} μ±„λ„μ΄ μ‚­μ λμ—μµλ‹λ‹¤.|
|μ±„λ„ μ΅°ν|GET /channels/:id|params: id|μ±„λ„ μ •λ³΄ (id, name, owner λ“±)|
|λ‚΄ μ±„λ„ λ©λ΅|GET /users/:userId/channels|params: userId|λ‚΄κ°€ λ§λ“  μ±„λ„ λ¦¬μ¤νΈ|

---
## π“’ νμ› API κ²°κ³Ό 

β… νμ›κ°€μ… μμ‹ (POST /join)
![ytc_post](https://seonohblog.netlify.app/assets/ytc_post.png)

β… κ°λ³„ νμ›μ΅°ν μμ‹ (GET /users/1)
![ytc_get](https://seonohblog.netlify.app/assets/ytc_get.png)

β… κ°λ³„νμ›νƒν‡΄ μμ‹ (DELETE /users/1)
![ytc_del](https://seonohblog.netlify.app/assets/ytc_del.png)

---

## β΅ HTTP λ©”μ„λ“ & Request/Response, νλΌλ―Έν„°

### β… HTTP λ©”μ„λ“ 

- **GET**: λ°μ΄ν„° μ΅°ν
- **POST**: μƒ λ°μ΄ν„° μƒμ„±
- **PUT/PATCH**: κΈ°μ΅΄ λ°μ΄ν„° μμ •(μ „μ²΄/λ¶€λ¶„)
- **DELETE**: λ°μ΄ν„° μ‚­μ 

### **β… νλΌλ―Έν„° 3μΆ… μ„ΈνΈ**

- **req.params**: URLμ— μ§μ ‘ λ°•ν κ°’ (μ: /users/:id)
- **req.query**: ?sort=desc μ²λΌ μΏΌλ¦¬μ¤νΈλ§ κ°’ (κ²€μƒ‰/ν•„ν„°/μ •λ ¬)
- **req.body**: POST/PUT λ“± μ”μ²­ λ³Έλ¬Έ(body)μ— λ“¤μ–΄μλ” λ°μ΄ν„°

```js
// /users/:id
const id = req.params.id; // /users/123 -> id === "123"
// /users?sort=desc
const sort = req.query.sort; // "desc"
// POST /users
const { userId, name } = req.body;
```

### **β… μμ™Έμ²λ¦¬ & μƒνƒ μ½”λ“**

|**μ½”λ“**|**μλ―Έ**|
|---|---|
|**200 OK**|μ”μ²­ μ •μƒ μ²λ¦¬(μ΅°ν, μμ •, μ‚­μ  λ“±)|
|**201 Created**|μƒλ΅μ΄ λ°μ΄ν„° μƒμ„± μ„±κ³µ (ex: νμ›κ°€μ…)|
|**400 Bad Request**|μλ»λ μ”μ²­ (νλΌλ―Έν„° λ„λ½, ν•μ‹ μ¤λ¥ λ“±)|
|**404 Not Found**|λ€μƒ μ—†μ (μ—†λ” id, μλ»λ URL λ“±)|
|**500 Internal Server Error**|μ„λ²„ μ—λ¬|
```js
if (!user) return res.status(404).json({ message: "μ—†λ” μ‚¬μ©μμ…λ‹λ‹¤." });
if (!req.body.userId) return res.status(400).json({ message: "userId ν•„μ”" });
```


---

## π·οΈ .route() μ²΄μ΄λ‹ ν¨ν„΄
Expressμ—μ„ **κ°™μ€ μ—”λ“ν¬μΈνΈ(/users/:id λ“±)μ—μ„ HTTP λ©”μ„λ“λ³„λ΅** μ½”λ“ λΈ”λ΅μ„ λ¬¶μ–΄μ„ κ΄€λ¦¬ν•  μ μκ² ν•΄μ£Όλ” λ°©μ‹μ΄λ‹¤.

### **π” μ™ μ“°λƒλ©΄?**
- **μ½”λ“κ°€ ν•λμ—** λ³΄μΈλ‹¤.
- μ—”λ“ν¬μΈνΈλ³„λ΅ **GET/PUT/DELETE λ“± κ΄€λ ¨ λ™μ‘μ„ κ·Έλ£Ήν•‘**ν•  μ μλ‹¤.
- μ‹¤λ¬΄μ—μ„ **RESTful API** λ§λ“¤ λ• μμ£Ό μ“΄λ‹¤.

```js
router.route('/users/:id')
  .get((req, res) => {
    // μ‚¬μ©μ μ΅°ν
  })
  .put((req, res) => {
    // μ‚¬μ©μ μμ •
  })
  .delete((req, res) => {
    // μ‚¬μ©μ μ‚­μ 
  });
```

- **1κ°μ URI μ—”λ“ν¬μΈνΈμ— μ—¬λ¬ λ©”μ„λ“(λ™μ‘)λ¥Ό λ¬¶μ–΄μ„ κ΄€λ¦¬**
- μ μ§€λ³΄μ, κ°€λ…μ„±, ν™•μ¥μ„±μ— μΆ‹μ•„μ„ μ‹¤λ¬΄μ—μ„λ„ μ„ νΈ

---
## **π’­ νκ³ **

β€Ά **μƒλ΅­κ² μ•κ² λ μ **
- μ‹¤μ λ΅ HTTP λ©”μ„λ“, νλΌλ―Έν„° λ¶„λ¥, μƒνƒμ½”λ“, .route() ν¨ν„΄ λ“±μ„ λ¨λ‘ μ μ©ν•΄μ„ RESTful APIλ¥Ό κµ¬ν„ν•΄λ³΄λ‹ κµ¬μ΅°κ°€ ν™•μ‹¤ν•κ² λ¨Έλ¦¬μ— λ“¤μ–΄μ¨λ‹¤!
- PostmanμΌλ΅ μ§μ ‘ μ”μ²­/μ‘λ‹µμ„ ν…μ¤νΈν•λ©° μ‹¤μ „ κ°κ°μ„ μµν”λ‹¤.

β€Ά **μ–΄λ µκ² λκ»΄μ΅λ λ¶€λ¶„**
- νλΌλ―Έν„° μΆ…λ¥(3μΆ…) κµ¬λ¶„μ΄ μ²μμ—” ν—·κ°λ Έμ§€λ§, μμ‹λ¥Ό μ§μ ‘ λ§λ“¤μ–΄ λ³΄λ©° μ²΄λ“ν•  μ μμ—λ‹¤.
- μμ™Έμ²λ¦¬λ¥Ό λΉΌλ¨ΉμΌλ©΄ μ‹¤μ λ΅ 400, 404 μ—λ¬κ°€ μ λ¨λ” κ±Έ κ²½ν—ν–λ‹¤.
- .route() ν¨ν„΄μ΄ μ²μμ—” μ–΄μƒ‰ν–μ§€λ§ μ½”λ“λ¥Ό λ¬¶μ–΄μ„ κ΄€λ¦¬ν•΄λ³΄λ‹ ν›¨μ”¬ κΉ”λ”ν•λ‹¤λ” κ±Έ λκΌλ‹¤.

β€Ά **λ‹¤μμ— ν•™μµν•  μ£Όμ **
- λ΅κ·ΈμΈ, λ΅κ·ΈμΈ μμ™Έμ²λ¦¬
- μ±„λ„ API μ„¤κ³„

---

## π”— μ°Έκ³  μλ£
- [Postman ν™μ©λ²•](https://learning.postman.com/docs/getting-started/introduction/)
