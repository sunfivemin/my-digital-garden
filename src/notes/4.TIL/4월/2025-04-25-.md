---
tags:
  - TIL
created: 2025-04-24
---

# 📘 2025-04-23 TIL

## 📌 오늘 배운 핵심 요약
- **Express Router의 역할과 구조**를 직접 실습하고, 코드 분리의 필요성을 체감
- 기능별 라우터 모듈 분리로, **URL 자동 관리와 유지보수의 장점**을 익힘
- **app.use()를 통한 경로 연결**의 동작 원리를 이해함
- 실제 회원-채널 **1:N 관계의 ERD 설계**를 그림과 표로 정리


## 🧠 상세 학습 내용

## 📍 주제 1:  Express Router (라우터)와 URL 구조의 이해

### 1. 라우터(router)란?
> “Express 서버에서 **API 주소별로 실행될 코드를 나눠서 관리**하는 도구”
> 즉, 기능별로(회원/채널 등) URL을 분리해 코드를 관리할 수 있게 해주는 Express의 핵심 기능.
#### ● 왜 라우터를 쓰나?
- **API 종류가 늘어나면** 한 파일(app.js)에 모든 코드를 몰아넣으면 **가독성, 유지보수성, 확장성**이 급격히 떨어짐
- **기능별로(회원/채널 등)** 코드 파일을 분리하면 팀 작업/버전관리/실무에서 훨씬 편리

### **2. 라우터 기본 구조/예시**
예를 들어,
- 회원 관련 API → /routes/users.js
- 채널 관련 API → /routes/channels.js

#### **/routes/users.js**
```js
const express = require('express');
const router = express.Router();

router.post('/join', ...);   // 회원가입
router.post('/login', ...);  // 로그인
router.get('/users', ...);   // 전체 회원 조회

module.exports = router;
```

#### **/routes/channels.js**
```js
const express = require('express');
const router = express.Router();

router.post('/', ...);          // 채널 생성
router.get('/', ...);           // 전체/내 채널 목록
router.put('/:id', ...);        // 채널 수정
router.delete('/:id', ...);     // 채널 삭제

module.exports = router;
```

---

### **3.** app.use()와 URL 연결 방식

#### app.use("경로", 라우터객체)가 무슨 뜻?

- app.use("/", userRouter)
    → userRouter가 관리하는 모든 경로 앞에 **/**가 붙게 됨
    - 즉, /join, /login, /users 등 **회원 관련 URL은 루트(/)에서 시작**

- app.use("/channels", channelRouter)
    → channelRouter가 관리하는 모든 경로 앞에 **/channels**가 자동으로 붙음
    - 즉, POST /channels(채널 생성), GET /channels(목록), PUT /channels/:id(수정) 등
        **채널 관련 API는 모두 /channels로 시작**

```js
const express = require('express');
const app = express();
app.use(express.json());

const userRouter = require('./routes/users');
const channelRouter = require('./routes/channels');

app.use('/', userRouter); // 회원 관련 경로 담당
app.use('/channels', channelRouter); // 채널 관련 경로 담당

app.listen(7777, () => {
  console.log("서버가 7777번 포트에서 실행 중입니다.");
});
```
- **장점:**
    - 기능별 코드가 독립적이라 가독성/협업/유지보수에 최적
    - 나중에 “회원/채널/관리자” 등 규모가 커져도 구조가 무너지지 않음
    - **URL 패턴에 맞춰 경로를 자동으로 관리해주니 오타/충돌도 적음**


---
## 📍 주제 2.  회원마다 채널 가지게 ERD 그려보기

### **1. 기본 개념: 회원(유저) - 채널 1:N 관계**

- **한 명의 회원이 여러 개의 유튜브 채널을 소유할 수 있다!**
    - (예: tester1이 ‘달려라’, ‘뛰어라’ 2개를 가짐)
- 반대로, **각 채널은 반드시 한 명의 회원(소유자)을 가진다**

### 2. 테이블(모델) 설계 예시
#### 1) 회원(User) 테이블

| **user_id** | **password** | **name** |
| ----------- | ------------ | -------- |
| testId1     | 1234         | tester1  |
| testId2     | 5678         | tester2  |

#### 1) 채널(Channel) 테이블
| **id** | **channel_title** | **user_id** | **sub_num** | **video_num** |
| ------ | ----------------- | ----------- | ----------- | ------------- |
| 1      | 달려라               | testId1     |             |               |
| 2      | 뛰어라               | testId1     |             |               |
| 3      | 걸어라               | testId2     |             |               |
- **user_id**: 회원 테이블의 기본키(PK)이며, 채널 테이블에서는 외래키(FK)로 사용
→ 이 값을 통해 “이 채널의 소유자”를 바로 알 수 있음

### 3. ERD 구조 관계 요약
```bash
[User] 1 ------ N [Channel]
회원(user_id)   <--- FK ---   채널(user_id)
```



---

## **💭 회고**

• **새롭게 알게 된 점**
- 

• **어렵게 느껴졌던 부분**
- 

• **다음에 학습할 주제**
- 
