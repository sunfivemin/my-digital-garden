---
tags:
  - TIL
created: 2025-05-15
---

# π“ 2025-05-15 TIL

## π“ μ¤λ λ°°μ΄ ν•µμ‹¬ μ”μ•½
- Expressμ—μ„ BookController λ¶„λ¦¬ μ‹¤μµ
- μ „μ²΄ λ„μ„ μ΅°ν (GET /books)
- νΉμ • λ„μ„ μƒμ„Έ μ΅°ν (GET /books/:id)
- μΉ΄ν…κ³ λ¦¬ μ „μ²΄ μ΅°ν (GET /category)
- HTTP μƒνƒ μ½”λ“ μ‹¤λ¬΄ μ μ© (200 OK, 400 Bad Request, 404 Not Found)

## π§  μƒμ„Έ ν•™μµ λ‚΄μ©

## π“ μ£Όμ  1: BookController μ‹¤μµ (λ„μ„ μ „μ²΄ μ΅°ν & μƒμ„Έ μ΅°ν)

### β… 1. μ „μ²΄ λ„μ„ μ΅°ν (GET /books)
```js
const allBooks = (req, res) => {
  let sql = 'SELECT * FROM books';
  conn.query(sql, (err, results) => {
    if (err) {
      console.log(err);
      return res.status(StatusCodes.BAD_REQUEST).end(); // μΏΌλ¦¬ μ¤λ¥ λ°μƒ μ‹ 400 Bad Request
    }
    return res.status(StatusCodes.OK).json(results); // μ •μƒ μ‘λ‹µ μ‹ 200 OK + μ „μ²΄ λ„μ„ λ©λ΅ λ°ν™
  });
};
```

**π“ μ”μ•½**
- DB books ν…μ΄λΈ”μ—μ„ λ¨λ“  λ„μ„ λ©λ΅μ„ μ΅°ν.
- μΏΌλ¦¬ μ¤λ¥ λ°μƒ μ‹ 400 Bad Request.
- μ •μƒ μ΅°ν μ‹ 200 OK + λ„μ„ λ¦¬μ¤νΈ λ°ν™.

---

### β… 2. νΉμ • λ„μ„ μƒμ„Έ μ΅°ν (GET /books/:id)
```js
const bookDetail = (req, res) => {
  let { id } = req.params; // URLμ /:id νλΌλ―Έν„° λ°›κΈ°

  let sql = 'SELECT * FROM books WHERE id=?';
  conn.query(sql, id, (err, results) => {
    if (err) {
      console.log(err);
      return res.status(StatusCodes.BAD_REQUEST).end();
    }

    if (results[0]) return res.status(StatusCodes.OK).json(results[0]); // λ°μ΄ν„°κ°€ μμΌλ©΄ 200 OK + ν•΄λ‹Ή λ„μ„ λ°ν™
    else return res.status(StatusCodes.NOT_FOUND).end(); // μ—†μΌλ©΄ 404 Not Found
  });
};
```

**π“ μ”μ•½**
- νΉμ • id κ°’μΌλ΅ μƒμ„Έ μ΅°ν.
- λ°μ΄ν„° μ΅΄μ¬ μ‹ 200 OK.
- λ°μ΄ν„° μ—†μΌλ©΄ 404 Not Found.
- SQL μ¤λ¥ λ°μƒ μ‹ 400 Bad Request.

---

### β… 3. μΉ΄ν…κ³ λ¦¬ μ „μ²΄ μ΅°ν (GET /category)
```js
const conn = require('../mariadb');
const { StatusCodes } = require('http-status-codes');


const allCategory = (req, res) => {
	// μΉ΄ν…κ³ λ¦¬ μ „μ²΄ λ©λ΅ λ¦¬μ¤νΈ
	let sql = 'SELECT * FROM category';
		conn.query(sql, (err, results) => {
		if (err) {
			console.log(err);
			return res.status(StatusCodes.BAD_REQUEST).end();
		}
		return res.status(StatusCodes.OK).json(results);
	});
};

module.exports = {
	allCategory,
};
```

**π“ μ”μ•½**
- category ν…μ΄λΈ”μ—μ„ μ „μ²΄ μΉ΄ν…κ³ λ¦¬ μ΅°ν.
- SQL μ¤λ¥ λ°μƒ μ‹ 400 Bad Request.
- μ •μƒ μ΅°ν μ‹ 200 OK.

![bookshopCategory.png](https://seonohblog.netlify.app/assets/bookshopCategory.png)

---

## π“ μ£Όμ  2: HTTP μƒνƒ μ½”λ“ μ‹¤λ¬΄ μ μ© μ›μΉ™
| **μƒν™©**        | **μƒνƒ μ½”λ“**       | **μλ―Έ**                     |
| ------------- | --------------- | -------------------------- |
| μ „μ²΄ λ„μ„ μ •μƒ μ΅°ν   | 200 OK          | μ •μƒ μ΅°ν, λ°μ΄ν„° μ΅΄μ¬              |
| νΉμ • λ„μ„ μ΅°ν μ„±κ³µ   | 200 OK          | ν•΄λ‹Ή IDμ λ„μ„ μ΅΄μ¬, μƒμ„Έ λ°μ΄ν„° λ°ν™    |
| νΉμ • λ„μ„ μ—†μ      | 404 Not Found   | λ„μ„ IDκ°€ DBμ— μ΅΄μ¬ν•μ§€ μ•μ         |
| SQL μ¤λ¥, μΏΌλ¦¬ μ¤λ¥ | 400 Bad Request | μλ»λ μ”μ²­ (SQL μ¤λ¥, νλΌλ―Έν„° μ¤λ¥ λ“±) |

**π’΅ μ¤‘μ”**
- **400 Bad Request**: ν΄λΌμ΄μ–ΈνΈκ°€ μλ»λ μ”μ²­ (μΏΌλ¦¬ μ¤λ¥, μ…λ ¥ κ°’ μ¤λ¥ λ“±)
- **404 Not Found**: μ”μ²­μ€ μ •μƒμ μ΄μ§€λ§ λ°μ΄ν„°κ°€ DBμ— μ—†μ„ λ•λ§ μ‚¬μ©ν•΄μ•Ό ν•¨


---

## **π’­ νκ³ **

### β€Ά μƒλ΅­κ² μ•κ² λ μ 
- μ»¨νΈλ΅¤λ¬ λ μ΄μ–΄μ—μ„ req.params, req.body λ“±μ„ ν†µν•΄ μ”μ²­ λ°μ΄ν„°λ¥Ό λ°›μ•„ λΉ„μ¦λ‹μ¤ λ΅μ§ μ²λ¦¬
- μƒνƒ μ½”λ“λ¥Ό λ…ν™•ν•κ² κµ¬λ¶„ν•΄μ¤μ•Ό ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„ μ–΄λ–¤ μƒν™©μΈμ§€ λΉ λ¥΄κ² νμ•… κ°€λ¥ν•λ‹¤.
- 404 Not Foundμ™€ 400 Bad Requestλ” λ°λ“μ‹ κµ¬λ¶„ν•΄μ„ μ‚¬μ©ν•  κ²ƒ

### β€Ά μ–΄λ µκ² λκ»΄μ΅λ λ¶€λ¶„
- SQL μΏΌλ¦¬ μ¤λ¥μ™€ λ°μ΄ν„° λ―Έμ΅΄μ¬ μƒν™©μ„ μ²μμ—λ” ν—·κ°λ ¤μ„ 404μ™€ 400μ„ κµ¬λ¶„ μ—†μ΄ μ‚¬μ©ν•λ ¤ ν–λ‹¤.
- req.params, req.query, req.body μ‚¬μ©μ² ν—·κ°λ ΈμΌλ‚ μ‹¤μµν•λ©° μ°¨μ΄μ μ„ μ²΄κ°ν–λ‹¤.

### β€Ά λ‹¤μμ— ν•™μµν•  μ£Όμ 
- λ„μ„ λ©λ΅ μ΅°ν API κµ¬ν„
- λ„μ„ λ©λ΅ μ΅°ν νμ΄μ§• κµ¬ν„ν•κΈ°
- μ‹ κ°„ μ•λ‚΄ κµ¬ν„


## π”— μ°Έκ³  μλ£
[picsum](https://picsum.photos/)