---
tags:
  - TIL
created: 2025-05-16
---

# 📘 2025-05-16 TIL

## 📌 오늘 배운 핵심 요약
- books 테이블과 category 테이블을 조인해서 도서 목록을 조회하는 API 구현
- 도서 목록 페이징 처리 방식 학습
- SQL에서 시간 범위 구하기 (DATE_ADD, SUB)


## 🧠 상세 학습 내용

## 📍 주제 1: 도서 목록 조회 API 조인 구현

- books 테이블에는 category_id만 존재 → 숫자(0, 1, 2)로 카테고리 구분
- 실제 카테고리 이름(“동화”, “소설” 등)은 category 테이블에 있음
- 이를 조인해서 보기 좋게 합치는 작업 수행

### ✅ 사용한 SQL
```sql
SELECT * FROM books 
LEFT JOIN category ON books.category_id = category.id
WHERE books.id = 1;
```

### ✅ 결과
- books 데이터와 함께 category_name도 함께 조회됨
- Postman에서 확인하면 JSON 응답에 category_name이 포함되어 깔끔하게 출력됨

### 💡 LEFT JOIN 개념 정리

| **구분**               | **설명**                                                |
| -------------------- | ----------------------------------------------------- |
| **PK (Primary Key)** | 테이블의 고유값 (category.id, books.id 등)                    |
| **FK (Foreign Key)** | 다른 테이블을 참조하는 값 (books.category_id → category.id)      |
| **LEFT JOIN**        | 기준 테이블(books)은 모두 가져오고, category에 일치하는 값이 있으면 합쳐서 보여줌 |



![개별도서조회](https://seonohblog.netlify.app/assets/개별도서조회.png)


---

## 📍 주제 2: SQL 시간 범위 구하기 (DATE_ADD, SUB)

### ✅ 배운 문법 & 개념
| **함수**                        | **설명**        | **예시**                                               |
| ----------------------------- | ------------- | ---------------------------------------------------- |
| DATE_ADD(기준날짜, INTERVAL 값 단위) | 기준 날짜에 시간 더하기 | SELECT DATE_ADD(NOW(), INTERVAL 1 MONTH); → 현재 + 1개월 |
| DATE_SUB(기준날짜, INTERVAL 값 단위) | 기준 날짜에서 시간 빼기 | SELECT DATE_SUB(NOW(), INTERVAL 1 MONTH); → 현재 - 1개월 |
|                               |               |                                                      |
```sql
SELECT DATE_ADD(NOW(), INTERVAL 1 MONTH);  
-- 지금 날짜로부터 한 달 뒤의 날짜를 계산

SELECT DATE_SUB(NOW(), INTERVAL 1 MONTH);  
-- 지금 날짜로부터 한 달 전의 날짜를 계산
```


### ✅ 실습: 한달 내 도서 목록 조회
```sql
SELECT * FROM books
WHERE pub_date BETWEEN DATE_SUB(NOW(), INTERVAL 1 MONTH) AND NOW();
-- 최근 한 달 내 출간된 책만 조회
```

- 의미: **오늘 기준으로 1개월 전부터 지금까지 등록된 책 조회**
- pub_date가 최근 1개월 이내인 책만 조회됨.
- SQL에서 날짜 비교를 BETWEEN으로 할 수 있음.

### ✅ 결과
- DATE_SUB로 구한 1개월 전 날짜 ~ NOW() 사이 pub_date 값이 필터링됨.
- books 테이블 내 최근 도서 목록만 출력됨.

![DATEADD](https://seonohblog.netlify.app/assets/DATEADD.png)


---

## 📍 주제 3: 카테고리별, 신간, 도서 목록 조회 








---


## 📍 주제 4: 도서 목록 조회 페이징 구현







---

## **💭 회고**

### • 새롭게 알게 된 점
- 

### • 어렵게 느껴졌던 부분
- 

### • 다음에 학습할 주제
- 


## 🔗 참고 자료
[picsum](https://picsum.photos/)